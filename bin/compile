#!/usr/local/bin/node --es_staging
"use strict";

const fs   = require("fs");
const path = require("path");
const Icon = require("../lib/icon.js");
const CoffeeScript = require("coffee-script");


const configPath = path.resolve(__dirname, "..", "config.cson");
const configData = fs.readFileSync(configPath).toString();
const config     = CoffeeScript.eval(configData);

const outputPath = path.join(path.dirname(configPath), "config.json");
const outputData = JSON.stringify([
	Icon.compile(config.directoryIcons),
	Icon.compile(config.fileIcons)
]);

fs.writeFileSync(outputPath, outputData);
